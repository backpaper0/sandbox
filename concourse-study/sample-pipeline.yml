groups:

- name: all
  jobs: [ui, api, integration]

- name: unit
  jobs: [ui, api]

- name: integration
  jobs: [integration]

resources:
- name: code-base
  source:
    interval: 60s
  type: time
  webhook_token: asdf
  check_every: 24h

- name: integration
  source:
    interval: 60s
  type: time
  webhook_token: zxcv
  check_every: 24h
jobs:

- name: ui
  plan:
  - get: code-base
    trigger: true
  - task: unit
    config:
      platform: linux
      image_resource:
        type: docker-image
        source:
          repository: alpine
          tags: edge
      run:
        path: sleep
        args: ["3"]

- name: api
  plan:
  - get: code-base
    trigger: true
  - task: unit
    config:
      platform: linux
      image_resource:
        type: docker-image
        source:
          repository: alpine
          tags: edge
      run:
        path: sleep
        args: ["5"]

- name: integration
  plan:
  - get: integration
    trigger: true
  - get: code-base
    trigger: true
    passed: [ui, api]
  - task: integration
    config:
      platform: linux
      image_resource:
        type: docker-image
        source:
          repository: alpine
          tags: edge
      run:
        path: sleep
        args: ["8"]

